#!/bin/bash
# Start the Management Utility
/usr/local/sbin/emhttp -p 81 &

sed -i -e 's/^telnet/#telnet/' /etc/inetd.conf
/etc/rc.d/rc.inetd restart

# do not touch above this line

# reusable

# Personalisation
PERSONAL_df=true
PERSONAL_hardlink=true
PERSONAL_ls=true

# check if a package is installed
isPackageInstalled () {
        type "$1" &> /dev/null ;
}




# aliases

alias chgrp='chgrp --preserve-root' # safety net
alias chmod='chmod --preserve-root' # safety net
alias chown='chown --preserve-root' # safety net
alias rm='rm --preserve-root' # safety net


# invoke df with personal settings
if [[ "${PERSONAL_df}" == "true" ]]
  then
        alias df='df -kh | grep '"'disk[^s]\|cache\|shm\|user0\|log'"
fi

# invoke a du alternative if it's installed
if isPackageInstalled ncdu; then
        alias du='ncdu' ;
else
        alias du='echo "ncdu is not installed :( Consider installing it!"' ;
fi

# invoke hardlink with personal settings
if [[ "${PERSONAL_hardlink}" == "true" ]]
  then
        alias hardlink='hardlink --content --keep-oldest --minimum-size 1K --io-size 16M --cache-size 16M --verbose'
        alias hardlinkdryrun='hardlink --content --keep-oldest --minimum-size 1K --io-size 16M --cache-size 16M --dry-run --verbose'
fi

alias infoArchitecture='uname --machine'
alias infoHost='infoArchitecture; infoProcessor; infoKernelName; infoKernelRelease'
alias infoKernel='infoKernelName; infoKernelRelease'
alias infoKernelName='uname --kernel-name'
alias infoKernelRelease='uname --kernel-release'
alias infoProcessor='uname --processor'

# invoke ls with personal settings
if [[ "${PERSONAL_ls}" == "true" ]]
  then
        alias ls='ls --almost-all --color --human-readable --inode'
        alias lsl='ls --almost-all --color --human-readable --inode -l'
fi

# list what packages are installed on the system
alias lspkgs='ls -l /var/log/packages/'
alias showpkgs='lspkgs'
